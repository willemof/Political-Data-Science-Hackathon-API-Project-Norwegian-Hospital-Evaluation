add_headers("Ocp-Apim-Subscription-Key" = key),
add_headers("Cache-Control"= "no-cache")) %>%
content(as = "text") %>% # extracting the data
jsonlite::fromJSON(flatten = TRUE) # parsing to dataframe
View(dg)
View(dg)
dg<-GET(testurl,
add_headers("Ocp-Apim-Subscription-Key" = key),
add_headers("Cache-Control"= "no-cache")) %>%
content(as = "text") %>% # extracting the data
jsonlite::fromJSON(flatten = TRUE) # parsing to dataframe
colnames(dg)
colnames(dg$ColumnNames)
dge<-dg$ColumnNames
View(dge)
View(dge)
flatten(dge)
dgef<- flatten(dge)
View(dgef)
View(dgef)
```{r}
utsettelse_plan_op <- GET("https://api.helsedirektoratet.no/innhold/nki/kvalitetsindikatorer/0003-0010-284",
# example of endpoint
add_headers("Ocp-Apim-Subscription-Key" = "281a8d6d65e247798f50513cef5ea2e1")) %>%
# how to authorize in the httr package
content(as = "text") %>% # extracting the data
jsonlite::fromJSON(flatten = TRUE, ) # parsing to dataframe
test <- as.data.frame(do.call(cbind, utsettelse_plan_op))
helsedir_nki <- GET("https://api.helsedirektoratet.no/innhold/nki/kvalitetsindikatorer/",
# example of endpoint
add_headers("Ocp-Apim-Subscription-Key" = "281a8d6d65e247798f50513cef5ea2e1")) %>%
# how to authorize in the httr package
content(as = "text") %>% # extracting the data
jsonlite::fromJSON(flatten = TRUE, ) # parsing to dataframe
dge <- data.frame(matrix(unlist(testurl),stringsAsFactors=FALSE)
View(dge)
dge <- data.frame(dg),stringsAsFactors=FALSE)
dge <- data.frame(matrix(unlist(dge),stringsAsFactors=FALSE)
dge <- data.frame(matrix(unlist(dg),stringsAsFactors=FALSE)
dge <- data.frame(matrix(unlist(dg)
dge <- data.frame(matrix(unlist(dg))
dge <- data.frame(matrix(unlist(dg))
dge <- data.frame(dg)
dg<-GET(testurl,
add_headers("Ocp-Apim-Subscription-Key" = key),
add_headers("Cache-Control"= "no-cache")) %>%
content(as = "text") %>% # extracting the data
jsonlite::fromJSON(flatten = TRUE) # parsing to dataframe
testurl <- "https://api.helsedirektoratet.no/innhold/nki/kvalitetsindikatorer/0003-0010-5/data?contentType=application/json"
key <- "1c50d76931ba48f69d177c18eaf3c6a8"
dg<-GET(testurl,
add_headers("Ocp-Apim-Subscription-Key" = key),
add_headers("Cache-Control"= "no-cache")) %>%
content(as = "text") %>% # extracting the data
jsonlite::fromJSON(flatten = TRUE) # parsing to dataframe
View(dg)
View(dg)
nest(dg)
unest(dg)
unnest(dg)
dge<-dg$AttachmentDataRows
View(dge)
View(dge)
url <- "https://api.helsedirektoratet.no/innhold/nki/kvalitetsindikatorer/"
key <- "1c50d76931ba48f69d177c18eaf3c6a8"
ds<-GET(url,
add_headers("Ocp-Apim-Subscription-Key" = key),
add_headers("Cache-Control"= "no-cache")) %>%
content(as = "text") %>% # extracting the data
jsonlite::fromJSON(flatten = TRUE) # parsing to dataframe
View(ds)
View(ds)
View(ds)
dse<- ds$attachments
View(dse)
View(dse)
dse[[2]][["fileType"]]
dse[[2]][["fileUri"]]
devtools::install_github("sailthru/tidyjson")
library(tidyjson)
gather_array(dg)
install.packages("tidyjson")
install.packages("tidyjson")
library(tidyjson)
tidyjson(ds)
tidyjson::tbl_json(dg)
tidyjson::tbl_json(ds)
tidyjson::gather_array(ds)
tidyjson::spread_all(ds)
ds<-GET(url,
add_headers("Ocp-Apim-Subscription-Key" = key),
add_headers("Cache-Control"= "no-cache")) %>%
content(as = "text") %>% # extracting the data
spread_all
#Since the API requires authorization, you have to add the "headers" argument as well.
library(httr)
library(tinytex)
library(tidyverse)
library(janitor)
library(kableExtra)
library(rjstat)
library(tidyjson)
url <- "https://api.helsedirektoratet.no/innhold/nki/kvalitetsindikatorer/"
key <- "1c50d76931ba48f69d177c18eaf3c6a8"
df<-GET("https://api.helsedirektoratet.no/innhold/nki/kvalitetsindikatorer/",
add_headers("Ocp-Apim-Subscription-Key" = "1c50d76931ba48f69d177c18eaf3c6a8"),
add_headers("Cache-Control"= "no-cache")) %>%
content(as = "text") %>% # extracting the data
jsonlite::fromJSON(flatten = TRUE) # parsing to dataframe
ds<-GET(url,
add_headers("Ocp-Apim-Subscription-Key" = key),
add_headers("Cache-Control"= "no-cache")) %>%
content(as = "text") %>% # extracting the data
spread_all
url <- "https://api.helsedirektoratet.no/innhold/nki/kvalitetsindikatorer/"
key <- "1c50d76931ba48f69d177c18eaf3c6a8"
df<-GET("https://api.helsedirektoratet.no/innhold/nki/kvalitetsindikatorer/",
add_headers("Ocp-Apim-Subscription-Key" = "1c50d76931ba48f69d177c18eaf3c6a8"),
add_headers("Cache-Control"= "no-cache")) %>%
content(as = "text") %>% # extracting the data
jsonlite::fromJSON(flatten = TRUE) # parsing to dataframe
View(df)
View(df)
testurl <- "https://api.helsedirektoratet.no/innhold/nki/kvalitetsindikatorer/0003-0010-5/data?contentType=application/json"
dg<-GET(testurl,
add_headers("Ocp-Apim-Subscription-Key" = key),
add_headers("Cache-Control"= "no-cache")) %>%
content(as = "text") %>% # extracting the data
jsonlite::fromJSON(flatten = TRUE) # parsing to dataframe
View(dg)
View(dg)
View(df[[24]][[1]])
header_key <- "Ocp-Apim-Subscription-Key"
key <- "1c50d76931ba48f69d177c18eaf3c6a8"
ds<-GET(url,
add_headers(header_key = key),
add_headers("Cache-Control"= "no-cache")) %>%
content(as = "text") %>% # extracting the data
jsonlite::fromJSON(flatten = TRUE) # parsing to dataframe
df<-GET("https://api.helsedirektoratet.no/innhold/nki/kvalitetsindikatorer/",
add_headers("Ocp-Apim-Subscription-Key" = "1c50d76931ba48f69d177c18eaf3c6a8"),
add_headers("Cache-Control"= "no-cache")) %>%
content(as = "text") %>% # extracting the data
jsonlite::fromJSON(flatten = TRUE) # parsing to dataframe
ds<-GET(url,
add_headers(header_key = key),
add_headers("Cache-Control"= "no-cache")) %>%
content(as = "text") %>% # extracting the data
jsonlite::fromJSON(flatten = TRUE) # parsing to dataframe
nocache <-add_headers("Cache-Control"= "no-cache")
df<-GET("https://api.helsedirektoratet.no/innhold/nki/kvalitetsindikatorer/",
add_headers("Ocp-Apim-Subscription-Key" = "1c50d76931ba48f69d177c18eaf3c6a8"),
nocache) %>%
content(as = "text") %>% # extracting the data
jsonlite::fromJSON(flatten = TRUE) # parsing to dataframe
header_key<- add_headers("Ocp-Apim-Subscription-Key" = "1c50d76931ba48f69d177c18eaf3c6a8")
url <- "https://api.helsedirektoratet.no/innhold/nki/kvalitetsindikatorer/"
key <- "1c50d76931ba48f69d177c18eaf3c6a8"
header_key<- add_headers("Ocp-Apim-Subscription-Key" = key)
nocache <-add_headers("Cache-Control"= "no-cache")
nocache <-add_headers("Cache-Control"= "no-cache") %>%
hide()
nocache <-add_headers("Cache-Control"= "no-cache") %>%
invisible()
key <- "1c50d76931ba48f69d177c18eaf3c6a8"%>%
invisible()
url <- "https://api.helsedirektoratet.no/innhold/nki/kvalitetsindikatorer/"
url <- "https://api.helsedirektoratet.no/innhold/nki/kvalitetsindikatorer/" %>%
invisible()
key <- "1c50d76931ba48f69d177c18eaf3c6a8" %>%
invisible()
header_key<- add_headers("Ocp-Apim-Subscription-Key" = key) %>%
invisible()
url <- "https://api.helsedirektoratet.no/innhold/nki/kvalitetsindikatorer/" %>%
invisible()
key <- "1c50d76931ba48f69d177c18eaf3c6a8" %>%
invisible()
header_key<- add_headers("Ocp-Apim-Subscription-Key" = key) %>%
invisible()
nocache <-add_headers("Cache-Control"= "no-cache") %>%
invisible()
invisible(nocache)
invisible(nocache)
View(nocache)
ds<-GET(url,
header_key,
nocache) %>%
content(as = "text") %>% # extracting the data
jsonlite::fromJSON(flatten = TRUE) # parsing to dataframe
textextract<- content(as = "text")
textextract<-content(as = "text")
textextract<-content(as = "text")
df<-GET("https://api.helsedirektoratet.no/innhold/nki/kvalitetsindikatorer/",
add_headers("Ocp-Apim-Subscription-Key" = "1c50d76931ba48f69d177c18eaf3c6a8"),
nocache) %>%
content(as = "text") %>% # extracting the data
jsonlite::fromJSON(flatten = TRUE) # parsing to dataframe
ds<-GET(url,
header_key,
nocache) %>%
content(as = "text") %>% # extracting the data
jsonlite::fromJSON(flatten = TRUE) # parsing to dataframe
View(header_key)
tidyjson::gather_array(ds)
url <- "https://api.helsedirektoratet.no/innhold/nki/kvalitetsindikatorer/"
key <- "80ad2d7c471e4b8fad3b000d21b6ef41"
header_key<- add_headers("Ocp-Apim-Subscription-Key" = key)
nocache <-add_headers("Cache-Control"= "no-cache")
df<-GET("https://api.helsedirektoratet.no/innhold/nki/kvalitetsindikatorer/",
add_headers("Ocp-Apim-Subscription-Key" = "1c50d76931ba48f69d177c18eaf3c6a8"),
nocache) %>%
content(as = "text") %>% # extracting the data
jsonlite::fromJSON(flatten = TRUE) # parsing to dataframe
ds<-GET(url,
header_key,
nocache) %>%
content(as = "text") %>% # extracting the data
jsonlite::fromJSON(flatten = TRUE) # parsing to dataframe
df<-GET("https://api.helsedirektoratet.no/innhold/kvalitetsindikatorer",
add_headers("Ocp-Apim-Subscription-Key" = "1c50d76931ba48f69d177c18eaf3c6a8"),
nocache) %>%
content(as = "text") %>% # extracting the data
jsonlite::fromJSON(flatten = TRUE) # parsing to dataframe
ds<-GET(url,
header_key,
nocache) %>%
content(as = "text") %>% # extracting the data
jsonlite::fromJSON(flatten = TRUE) # parsing to dataframe
url <- "https://api.helsedirektoratet.no/innhold/kvalitetsindikatorer/"
ds<-GET(url,
header_key,
nocache) %>%
content(as = "text") %>% # extracting the data
jsonlite::fromJSON(flatten = TRUE) # parsing to dataframe
df<-GET("https://api.helsedirektoratet.no/innhold/nki/kvalitetsindikatorer/",
add_headers("Ocp-Apim-Subscription-Key" = "1c50d76931ba48f69d177c18eaf3c6a8"),
nocache) %>%
content(as = "text") %>% # extracting the data
jsonlite::fromJSON(flatten = TRUE) # parsing to dataframe
View(ds)
View(ds)
options(encoding="UTF-8")
library(httr)
library(rjstat) #For JSON
url <- "https://data.ssb.no/api/v0/no/table/10261"
#
data.tmp <- '
{
"query": [
{
"code": "Region",
"selection": {
"filter": "vs:Helseregion330b",
"values": [
"H12",
"H03",
"H04",
"H05"
]
}
},
{
"code": "ContentsCode",
"selection": {
"filter": "item",
"values": [
"Heldognsopphold",
"Dagbehandlinger"
]
}
}
],
"response": {
"format": "json-stat2"
}
}
'
d.tmp <- POST(url , body = data.tmp, encode = "json", verbose())
# Henter ut innholdet fra d.tmp som tekst deretter bearbeides av fromJSONstat
ssb.df.dagbehandling <- fromJSONstat(content(d.tmp, "text"))
#Since the API requires authorization, you have to add the "headers" argument as well.
library(httr)
library(tinytex)
library(tidyverse)
library(janitor)
library(kableExtra)
library(rjstat)
library(tidyjson)
url <- "https://api.helsedirektoratet.no/innhold/kvalitetsindikatorer/"
key <- "80ad2d7c471e4b8fad3b000d21b6ef41"
header_key<- add_headers("Ocp-Apim-Subscription-Key" = key)
nocache <-add_headers("Cache-Control"= "no-cache")
df<-GET("https://api.helsedirektoratet.no/innhold/nki/kvalitetsindikatorer/",
add_headers("Ocp-Apim-Subscription-Key" = "1c50d76931ba48f69d177c18eaf3c6a8"),
nocache) %>%
content(as = "text") %>% # extracting the data
jsonlite::fromJSON(flatten = TRUE) # parsing to dataframe
ds<-GET(url,
header_key,
nocache) %>%
content(as = "text") %>% # extracting the data
jsonlite::fromJSON(flatten = TRUE) # parsing to dataframe
View(df)
View(df)
View(df[[24]][[113]])
testurl <- "https://api.helsedirektoratet.no/innhold/nki/kvalitetsindikatorer/0003-0010-204/data?contentType=application/json
"
dg<-GET(testurl,
add_headers("Ocp-Apim-Subscription-Key" = key),
add_headers("Cache-Control"= "no-cache")) %>%
content(as = "text") %>% # extracting the data
jsonlite::fromJSON(flatten = TRUE) # parsing to dataframe
testurl <- "https://api.helsedirektoratet.no/innhold/nki/kvalitetsindikatorer/0003-0010-204/data?contentType=application/json")
testurl <- "https://api.helsedirektoratet.no/innhold/nki/kvalitetsindikatorer/0003-0010-204/data?contentType=application/json")
dg<-GET(testurl,
add_headers("Ocp-Apim-Subscription-Key" = key),
add_headers("Cache-Control"= "no-cache")) %>%
content(as = "text") %>% # extracting the data
jsonlite::fromJSON(flatten = TRUE) # parsing to dataframe
testurl <- "https://api.helsedirektoratet.no/innhold/nki/kvalitetsindikatorer/0003-0010-204/data?contentType=application/json"
dg<-GET(testurl,
add_headers("Ocp-Apim-Subscription-Key" = key),
add_headers("Cache-Control"= "no-cache")) %>%
content(as = "text") %>% # extracting the data
jsonlite::fromJSON(flatten = TRUE) # parsing to dataframe
dg<-GET(testurl,
header_key,
add_headers("Cache-Control"= "no-cache")) %>%
content(as = "text") %>% # extracting the data
jsonlite::fromJSON(flatten = TRUE) # parsing to dataframe
key <- "80ad2d7c471e4b8fad3b000d21b6ef41"
testurl <- "https://api.helsedirektoratet.no/innhold/nki/kvalitetsindikatorer/0003-0010-204/data?contentType=application/json"
dg<-GET(testurl,
add_headers("Ocp-Apim-Subscription-Key" = key),
add_headers("Cache-Control"= "no-cache")) %>%
content(as = "text") %>% # extracting the data
jsonlite::fromJSON(flatten = TRUE) # parsing to dataframe
View(dg)
View(dg)
GET
dg<-GET(testurl,
add_headers("Ocp-Apim-Subscription-Key" = "1c50d76931ba48f69d177c18eaf3c6a8"),
add_headers("Cache-Control"= "no-cache")) %>%
content(as = "text") %>% # extracting the data
jsonlite::fromJSON(flatten = TRUE) # parsing to dataframe
View(dg)
dg[["AttachmentDataRows"]][["QualityIndicatorName"]]
dge<-dg$AttachmentDataRows %>%
jsonlite::fromJSON(flatten = TRUE)
dge<-dg$AttachmentDataRows %>%
content(as = "text") %>%
jsonlite::fromJSON(flatten = TRUE)
dge<-dg$AttachmentDataRows %>%
content(as = "txt") %>%
jsonlite::fromJSON(flatten = TRUE)
dge<-dg$AttachmentDataRows %>%
content(as = "text") %>%
jsonlite::fromJSON(flatten = TRUE)
dge<-GET(dg$AttachmentDataRows) %>%
content(as = "text") %>%
jsonlite::fromJSON(flatten = TRUE)
dge<-GET(dg$AttachmentDataRows)
dg<-GET(testurl,
add_headers("Ocp-Apim-Subscription-Key" = "1c50d76931ba48f69d177c18eaf3c6a8"),
add_headers("Cache-Control"= "no-cache")) %>%
content(as = "text") %>% # extracting the data
jsonlite::fromJSON(flatten = TRUE) # parsing to dataframe
dge<-GET(dg$AttachmentDataRows)
dge<-GET(dg$AttachmentDataRows) %>%
content(as = "text") %>%
jsonlite::fromJSON(flatten = TRUE)
dge<-GET(dg$AttachmentDataRows) %>%
content(as = "text")
dge<-dg$AttachmentDataRows %>%
content(as = "text")
dge<-dg$AttachmentDataRows
View(dge)
View(dge)
dge_only_norway <- filter(dge$ParentName=="Hele landet")
dge_only_norway <- filter(ParentName=="Hele landet")
dge_only_norway <- dge %>%
filter(ParentName=="Hele landet")
View(dge)
View(dge)
View(dge_only_norway)
View(dge_only_norway)
dge_only_norway <- dge %>%
filter(ParentName=="Hele landet") %>%
group_by(QualityIndicatorName)
View(dge_only_norway)
View(dge_only_norway)
dge_only_norway <- dge %>%
filter(ParentName=="Hele landet") %>%
group_by(QualityIndicatorId)
dge_only_norway <- dge %>%
filter(ParentName=="Hele landet") %>%
group_by(QualityIndicatorId)
dge<-dg$AttachmentDataRows %>%
clean_names()
dge<-dg$AttachmentDataRows %>%
clean_names()
dge_only_norway <- dge %>%
filter(ParentName=="Hele landet") %>%
group_by(QualityIndicatorId)
dge_only_norway <- dge %>%
filter(parent_name=="Hele landet") %>%
group_by(QualityIndicatorId)
variable.names(dge)
dge_only_norway <- dge %>%
filter(parent_name=="Hele landet") %>%
group_by(qualirt_indicator_id)
dge_only_norway <- dge %>%
filter(parent_name=="Hele landet") %>%
group_by(quality_indicator_id)
View(dge_only_norway)
View(dge_only_norway)
dge_only_norway <- dge %>%
filter(parent_name=="Hele landet") %>%
group_by(quality_indicator_name)
View(dge_only_norway)
View(dge_only_norway)
dge_only_norway <- dge %>%
filter(parent_name=="Hele landet") %>%
filter(period_type=="Årlig") %>%
group_by(quality_indicator_name)
View(dge_only_norway)
View(dge_only_norway)
dge_only_norway <- dge %>%
filter(parent_name=="Hele landet") %>%
filter(period_type=="Årlig") # %>%
dge_only_norway <- dge %>%
filter(parent_name=="Hele landet") %>%
filter(period_type=="Årlig")
dge_only_norway <- dge %>%
filter(parent_name=="Hele landet") %>%
filter(period_type=="Årlig")
View(dge_only_norway)
View(dge_only_norway)
dge_only_norway <- dge %>%
filter(parent_name=="Hele landet") %>%
filter(period_type=="Årlig") %>%
aggregate(quality_indicator_name)
dge_only_norway <- dge %>%
filter(parent_name=="Hele landet") %>%
filter(period_type=="Årlig") %>%
aggregate(quality_indicator_id)
aggregate(dge_only_norway)
aggregate(dge_only_norway$quality_indicator_id)
aggregate(dge_only_norway, quality_indicator_id)
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, error = FALSE, message = FALSE)
library(tidyverse)
costofliving <- read_csv("C:/Users/solvebjo/OneDrive - Universitetet i Oslo/Teaching/ISSSV1337/datafolder/costofliving.csv")
costofliving_clean %>%
group_by(country) %>%
summarise(cofi_sum = sum(cofi, na.rm = TRUE)) %>%
ungroup()
dge_only_norway %>%
group_by(quality_indicator_id) %>%
summarise(cofi_sum = sum(cofi, na.rm = TRUE)) %>%
ungroup()
dge_only_norway <- dge %>%
filter(parent_name=="Hele landet") %>%
filter(period_type=="Årlig") %>%
aggregate()
group_mean <- aggregate(location_id ~ location_name, data = dge_only_norway, mean)
group_mean <- aggregate(dge_only_norway$location_id ~ dge_only_norway$location_name, data = dge_only_norway, mean)
#Since the API requires authorization, you have to add the "headers" argument as well.
library(httr)
library(tinytex)
library(tidyverse)
library(janitor)
library(kableExtra)
library(rjstat)
url <- "https://api.helsedirektoratet.no/innhold/nki/kvalitetsindikatorer/"
key <- "1c50d76931ba48f69d177c18eaf3c6a8"
ds<-GET(url,
add_headers("Ocp-Apim-Subscription-Key" = key),
add_headers("Cache-Control"= "no-cache")) %>%
content(as = "text") %>% # extracting the data
jsonlite::fromJSON(flatten = TRUE) # parsing to dataframe
url2 <- "https://api.helsedirektoratet.no/innhold/nki/kvalitetsindikatorer/0003-0010-5/data?contentType=application/json"
dg<-GET(url2,
add_headers("Ocp-Apim-Subscription-Key" = key),
add_headers("Cache-Control"= "no-cache")) %>%
content(as = "text") %>% # extracting the data
jsonlite::fromJSON(flatten = TRUE)
dg<-GET(url2,
add_headers("Ocp-Apim-Subscription-Key" = key),
add_headers("Cache-Control"= "no-cache")) %>%
content(as = "text") %>% # extracting the data
jsonlite::fromJSON(flatten = TRUE)
#Since the API requires authorization, you have to add the "headers" argument as well.
library(httr)
library(tinytex)
library(tidyverse)
library(janitor)
library(kableExtra)
library(rjstat)
url <- "https://api.helsedirektoratet.no/innhold/nki/kvalitetsindikatorer/"
key <- "1c50d76931ba48f69d177c18eaf3c6a8"
ds<-GET(url,
add_headers("Ocp-Apim-Subscription-Key" = key),
add_headers("Cache-Control"= "no-cache")) %>%
content(as = "text") %>% # extracting the data
jsonlite::fromJSON(flatten = TRUE) # parsing to dataframe
url2 <- "https://api.helsedirektoratet.no/innhold/nki/kvalitetsindikatorer/0003-0010-5/data?contentType=application/json"
dg<-GET(url2,
add_headers("Ocp-Apim-Subscription-Key" = key),
add_headers("Cache-Control"= "no-cache")) %>%
content(as = "text") %>% # extracting the data
jsonlite::fromJSON(flatten = TRUE)
unnest(dg)
